
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Autor: Kamil Jaron modified v1.7 of Petr Zemanek (zemanekp@math.muni.cz)   %%%
% Version: 1.0 (30. May 2017)                                                %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\filename{slim.thesis.sty}
\def\filedate{2017/05/10}
\def\fileversion{1.0}

\@ifundefined{NeedsTeXFormat}{
\typeout{*******************************************************************************}
\ProvidesClass{slim.thesis}[\filedate\space v\fileversion]
\typeout{*******************************************************************************}
}{
\NeedsTeXFormat{LaTeX2e}
\typeout{*******************************************************************************}
\RequirePackage{etoolbox,graphicx,textfit,changepage,setspace,ifthen,fancyhdr,calc,pdfpages,makeidx,color}
\RequirePackage{hyperref}
\RequirePackage[all]{hypcap}
}

\DeclareOption{Colour}{\hypersetup{
linkcolor=red,
citecolor=blue,
filecolor=magenta,
urlcolor=cyan,
}}

\DeclareOption{Print}{\hypersetup{
linkcolor=black,
citecolor=black,
filecolor=black,
urlcolor=black,
}}

\ProcessOptions

\overfullrule10pt

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% DEFINICE POVINNYCH CASTI %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\setAffiliation}[3]{\newcommand{\University}{#1}
                                \newcommand{\Faculty}{#2}
                                \newcommand{\Department}{#3}}

\newcommand{\setYear}[1]{\newcommand{\Year}{#1}}
\newcommand{\setPlace}[1]{\newcommand{\Place}{#1}}

\newcommand{\setAutor}[1]{\newcommand{\Author}{#1}}
\newcommand{\setTitle}[1]{\newcommand{\TitleOfThesis}{#1}}
\newcommand{\setSupervisor}[1]{\newcommand{\Supervisor}{#1}}
\newcommand{\setKeywords}[1]{\newcommand{\Keywords}{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ROZMERY STRANKY %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
\newcommand{\VelikostHlavicky}{12 pt+\@ptsize pt}
\makeatother
\usepackage[top=22mm,bottom=24mm,left=34mm,right=25mm,headsep=6mm,footskip=8mm,includeheadfoot,
headheight=\VelikostHlavicky]{geometry}

%%%%%%%%%%%%%%%%%
%%%%% DATUM %%%%%
%%%%%%%%%%%%%%%%%

\def\Dnes{\number\day.~\ifcase
\month\or ledna\or Ãºnora\or
b{\v{r}}ezna\or dubna\or kv{\v{e}}tna\or
{\v{c}}ervna\or {\v{c}}ervence\or srpna\or
z{\'{a}}{\v{r}}{\'{i}}\or {\v{r}}{\'{i}}jna\or listopadu\or
prosince\fi \space\number\year}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%% PREDEFINOVANI CLEARDOUBLEPAGE - NA PRAZDNYCH STRANACH PRI OBOUSTRANNEM TISKU NEBUDE HLAVICKA %%%%%%%

\makeatletter
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
    \hbox{}
    \thispagestyle{empty}
    \newpage
    \if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother \clearpage{\pagestyle{empty}\cleardoublepage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% HALVICKY POVINNYCH CASTI %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
\newcommand{\NazevPovinneCasti}[1]{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedright
    \normalfont
    \interlinepenalty\@M
    \Huge \bfseries  #1\par\nobreak
    \vskip 30\p@
  }}
\makeatother

%%%%%%%%%%%%%%%%%
%%%%% DESKY %%%%%
%%%%%%%%%%%%%%%%%

\newcommand{\Frontpage}[1]{
\pagestyle{empty}
\begin{titlepage}
\pdfbookmark{Cover}{Cover}
\pagenumbering{Alph}

\newlength{\sirkaustavorig} %% urci puvodni sirku textu s nazvem ustavu
\settowidth{\sirkaustavorig}{\fontsize{16pt}{28pt}\selectfont{\textbf{\textsc{\Department}}}}

\newlength{\sirkafakultaorig} %% urci sirku textu s nazvem fakulty
\settowidth{\sirkafakultaorig}{\fontsize{21pt}{28pt}\selectfont{\textbf{\textsc{P{\v{r}}{\'{i}}rodov{\v{e}}deck{\'{a}}
fakulta}}}}


  \begin{center}
    {\fontsize{22pt}{28pt}\selectfont{\textbf{\textsc{\University}}}}\\[2mm]
    {\fontsize{21pt}{28pt}\selectfont{\textbf{\textsc{\Faculty}}}}\\
    \ifthenelse{\lengthtest{\sirkaustavorig > 0.95\sirkafakultaorig}}%
        {\textbf{\textsc{\scaletowidth{0.95\sirkafakultaorig}{\Department}}}}%
        {\vspace*{-3mm}\fontsize{16pt}{28pt}\selectfont{\textbf{\textsc{\Department}}}}
  \end{center}

\vfill

  \begin{center}
    {\fontsize{34pt}{20pt}\selectfont{\bf #1}}
  \end{center}

\vfill


\setbox2=\hbox{\textbf{\textsc{\Author}}}
\setbox1=\hbox{textbf{\textsc{Z}}}
\ht2=\the\ht1
\setbox0=\hbox{\resizebox{0.68\textwidth}{!}{\box2}}

\newlength{\sirkadeskyorig} %% urci puvodni sirku textu se jmenem autora
\settowidth{\sirkadeskyorig}{\fontsize{22pt}{28pt}\selectfont{\textbf{\textsc{\Author}}}}

\begin{raggedright}
 \ifthenelse{\lengthtest{\sirkadeskyorig > 0.65\textwidth}}%
       {\noindent \resizebox{!}{\the\ht0}{{\textbf{\textsc{\Place~\Year}}}} \hfill \copy0}
       {{\fontsize{22pt}{28pt}\selectfont{\textbf{\textsc{\Place~\Year \hfill \Author}}}}}
\end{raggedright}

\end{titlepage}

\cleardoublepage
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% NASTAVENI ZAKLADNIHO ZAHLAVI A ZAPATI V SABLONE %%%%%%%%%%%%%%%%%%%%%%%

\def\headrulewidth{0pt}%
\def\footrulewidth{0pt}%

\makeatletter
\fancypagestyle{plain}{%
\fancyhf{}
  \if@twoside
    \fancyfoot[RO]{\it\small--\,\thepage\,--}\fancyfoot[LE]{\it\small--\,\thepage\,--}% TWOSIDE
  \else
    \fancyfoot[R]{\it\small--\,\thepage\,--}% ONESIDE
  \fi
}

\newcommand{\HlavickaUvod}{
\pagestyle{fancy}%
\fancyhf{}%
  \if@twoside
    \fancyhead[CO]{\small\it {\'{U}}vod\ \hrulefill\ \thepage}% TWOSIDE
    \fancyhead[CE]{\small\it\thepage\ \hrulefill\ {\'{U}}vod}% TWOSIDE
  \else
    \fancyhead[C]{\small\it {\'{U}}vod\ \hrulefill\ \thepage}% ONESIDE
  \fi
}

\newcommand{\HlavickaZnaceni}{
\pagestyle{fancy}%
\fancyhf{}%
  \if@twoside
    \fancyhead[CO]{\small\it P{\v{r}}ehled pou{\v{z}}it{\'{e}}ho zna{\v{c}}en{\'{i}}\ \hrulefill\ \thepage}% TWOSIDE
    \fancyhead[CE]{\small\it\thepage\ \hrulefill\ P{\v{r}}ehled pou{\v{z}}it{\'{e}}ho zna{\v{c}}en{\'{i}}}% TWOSIDE
  \else
    \fancyhead[C]{\small\it P{\v{r}}ehled pou{\v{z}}it{\'{e}}ho zna{\v{c}}en{\'{i}}\ \hrulefill\ \thepage}% ONESIDE
  \fi
}

\newcommand{\HlavickaKapitoly}{%
\pagestyle{fancy}%
\fancyhf{}%
  \if@twoside
    \fancyhead[CO]{\small\it \chaptername\ \leftmark\ \hrulefill\ \thepage}% TWOSIDE
    \fancyhead[CE]{\small\it\thepage\ \hrulefill\ \chaptername\ \leftmark}% TWOSIDE
  \else
    \fancyhead[C]{\small\it \chaptername\ \leftmark\ \hrulefill\ \thepage}% ONESIDE
  \fi
}

\newcommand{\HlavickaZaver}{
\pagestyle{fancy}%
\fancyhf{}%
  \if@twoside
    \fancyhead[CO]{\small\it Z{\'{a}}v{\v{e}}r\ \hrulefill\ \thepage}% TWOSIDE
    \fancyhead[CE]{\small\it\thepage\ \hrulefill\ Z{\'{a}}v{\v{e}}r}% TWOSIDE
   \else
    \fancyhead[C]{\small\it Z{\'{a}}v{\v{e}}r\ \hrulefill\ \thepage}% ONESIDE
  \fi
}

\newcommand{\HlavickaPriloha}{
\pagestyle{fancy}%
\fancyhf{}%
  \if@twoside
    \fancyhead[CO]{\small\it P{\v{r}}{\'{i}}loha\ \hrulefill\ \thepage}% TWOSIDE
    \fancyhead[CE]{\small\it\thepage\ \hrulefill\ P{\v{r}}{\'{i}}loha}% TWOSIDE
   \else
    \fancyhead[C]{\small\it P{\v{r}}{\'{i}}loha\ \hrulefill\ \thepage}% ONESIDE
  \fi
}


\newcommand{\HlavickaLiteratura}{
\pagestyle{plain}%
\fancyhf{}%
  \if@twoside
    \fancyhead[CO]{\small\it \bibname\ \hrulefill\ \thepage}% TWOSIDE
    \fancyhead[CE]{\small\it\thepage\ \hrulefill\ \small \bibname}% TWOSIDE
  \else
    \fancyhead[C]{\small\it \bibname\ \hrulefill\ \thepage}% ONESIDE
  \fi
}

\newcommand{\HlavickaRejstrik}{
\pagestyle{plain}%
\fancyhf{}%
  \if@twoside
    \fancyhead[CO]{\small\it \indexname\ \hrulefill\ \thepage}% TWOSIDE
    \fancyhead[CE]{\small\it\thepage\ \hrulefill\ \indexname}% TWOSIDE
  \else
    \fancyhead[C]{\small\it \indexname\ \hrulefill\ \thepage}% ONESIDE
  \fi
}

\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%% VLOZ=INPUT %%%%%%%

\newcommand{\vloz}{\input}

%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%% REJSTRIK %%%%%%%%

\makeatletter
\renewenvironment{theindex}
               {\if@twocolumn
                  \@restonecolfalse
                \else
                  \@restonecoltrue
                \fi
                \twocolumn[\phantomsection\addcontentsline{toc}{chapter}{\indexname}\@makeschapterhead{\indexname}]%
                \@mkboth{\MakeUppercase\indexname}%
                        {\MakeUppercase\indexname}%
                \thispagestyle{plain}\parindent\z@
                \parskip\z@ \@plus .3\p@\relax
                \columnseprule \z@
                \columnsep 35\p@
                \let\item\@idxitem}
               {\if@restonecol\onecolumn\else\clearpage\fi}
\makeatother

\newcommand{\VytvorRejstrik}{
\printindex
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%  INFORMACE PRO PDF %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\AtEndPreamble{
\hypersetup{
pdfencoding=unicode,
pdftitle={\TitleOfThesis.},
pdfauthor={\Author{} (\Dnes)},
%pdfsubject={Unil, faculty of biology and medicine, School of biology, Lausanne \Year},
pdfkeywords={\Keywords},
linktoc=all,
breaklinks=true,
colorlinks=true,
pdfencoding=auto,
%% pro dalsi mozna nastaveni viz http://www.tug.org/applications/hyperref/manual.html
}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%% VYLEPSENY VZHLED OBSAHU %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{tocloft}

\renewcommand{\cftbeforetoctitleskip}{21.5mm} %%% Mezera pred nadpisem - needitujte
\renewcommand{\cftaftertoctitleskip}{6.5mm}   %%% Mezera za nadpisem - needitujte

\renewcommand{\cftchapfont}{\bfseries}        %%% font nazev kapitoly v obsahu
\renewcommand{\cftchappagefont}{\bfseries}    %%% font pro cislo stranky u kapitoly
\renewcommand{\cftchappresnum}{Kapitola }     %%% pred cislem kapitoly se vypisuje text ``Kapitola''
\renewcommand{\cftchapaftersnum}{.}           %%% za cislem kapitoly je ``.''
\renewcommand{\cftchapnumwidth}{22mm}         %%% mezera za cislem kapitoly - v pripade potreby zmente
\renewcommand{\cftchapleader}{ \bf\dotfill\ } %%% oddelovac mezi nazvem kapitoly a cislem strany

\setlength{\cftsecindent}{6mm}                %%% sirka odsazeni urovne podkapitoly
\setlength{\cftbeforesecskip}{0.7mm}          %%% vertikalni mezera nad polozkou podkapitoly
\setlength{\cftsecnumwidth}{8mm}              %%% mezera za cislem podkapitoly - v pripade potreby zmente
\renewcommand{\cftsecdotsep}{3}               %%% hustota vyplne mezi nazvem podkapitoly a cislem stranky

\setlength{\cftsubsecindent}{14mm}            %%% sirka odsazeni urovne odstavce
\setlength{\cftbeforesubsecskip}{0.5mm}       %%% vertikalni mezera nad polozkou odstavce
\setlength{\cftsubsecnumwidth}{10mm}          %%% mezera za cislem odstavce - v pripade potreby zmente
\renewcommand{\cftsubsecdotsep}{3}            %%% hustota vyplne mezi nazvem odstavce a cislem stranky

\newcommand{\VytvorObsah}{\tableofcontents}
